"use strict";var _this=void 0,AppExportPDF=function(){var t={AppExportGeneral:"AppExportGeneral",AppStructureExport:"AppStructureExport",AppPanelExport:"AppPanelExport",AppCoverPage:"AppCoverPage",AppContentPage:"AppContentPage",btnExportPdf:".btnExportPdf",btnExportAllPdf:"#btnExportAllPdf"},e=[],n=[],r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData;return new Promise((function(n,r){fetch(t,{method:"POST",body:e}).then((function(t){return t.json()})).then((function(t){t.success?n(t.data):r(t.message)})).catch((function(t){r(t)}))}))},o=function(r){return new Promise((function(o,a){try{r;var p=t,i=$("#"+p.AppExportGeneral);i.append($("<div/>",{id:p.AppStructureExport,class:"col12"})),i.append($("<div/>",{id:p.AppPanelExport})),i.find("#"+p.AppPanelExport).append($("<div/>",{id:p.AppCoverPage,class:"col12"})),i.find("#"+p.AppPanelExport).append($("<div/>",{id:p.AppContentPage,class:"col12"})),i.find("#"+p.AppStructureExport).html(r.structure),i.find("#"+p.AppCoverPage).html(i.find("#"+p.AppStructureExport).find("#cover-page").html()),i.find("#"+p.AppStructureExport).find("#cover-page").html("");var s=r.design.body;e=[],n=[],s=(s=s.replaceAll("$BLOQUE_INICIO$",'<div class="row">')).replaceAll("$BLOQUE_FIN$","</div>"),r.chartItems=e,r.htmlItems=n,i.find("#"+p.AppContentPage).html('<div style="width:700px !important;">'+s+"</div>"),$("#panel-report").removeClass("d-none"),r.filename=r.design.name,r.filename=r.filename.toUpperCase(),o(r)}catch(t){console.log(t),a(t)}}))},a=function(t){return new Promise((function(e,n){for(var r=[],o=0;o<t.charts.length;o++){var a=t.charts[o];r.push(a.chart.exporting.getImage("png"))}Promise.all(r).then((function(n){for(var r=0;r<t.charts.length;r++){var o=t.charts[r];$("#"+o.graph).remove(),$("#"+o.img).attr("src",n[r]).removeClass("d-none")}e(t)})).catch((function(t){n(t)}))}))},p=function(e){return kendo.pdf.defineFont({"DejaVu Sans":"https://kendo.cdn.telerik.com/2014.3.1314/styles/fonts/DejaVu/DejaVuSans.ttf","DejaVu Sans|Bold":"https://kendo.cdn.telerik.com/2014.3.1314/styles/fonts/DejaVu/DejaVuSans-Bold.ttf","DejaVu Sans|Bold|Italic":"https://kendo.cdn.telerik.com/2014.3.1314/styles/fonts/DejaVu/DejaVuSans-Oblique.ttf","DejaVu Sans|Italic":"https://kendo.cdn.telerik.com/2014.3.1314/styles/fonts/DejaVu/DejaVuSans-Oblique.ttf"}),kendo.drawing.drawDOM("#"+t.AppPanelExport,{paperSize:"A4",scale:.7,template:$("#page-template").html()}).then((function(t){return kendo.drawing.pdf.saveAs(t,e.filename+".pdf"),e}))};!function(){var t=document.getElementById("AppExportKapitalWeb");if(t){var e=t.getAttribute("uid"),n=t.getAttribute("rid");t.removeAttribute("uid"),t.removeAttribute("rid"),function(t,e){var n=o,i=a,s=p;r("/kapital/".concat(t,"/reportes/").concat(e,"/show")).then(n).then((function(t){console.log(t),$("#panel-acctions").html($("#template-acctions").html()),$("#title-export").text(t.design.name.toUpperCase());var e=0,n=setInterval((function(){$(".progress-bar").css("width",e+"%"),$(".progress-bar").html(e+"%"),(e+=10)>95&&clearInterval(n)}),800);i(t).then((function(t){clearInterval(n),$(".progress-bar").css("width","100%"),$(".progress-bar").html("Completado"),$("#btn-download").attr("disabled",!1),setTimeout((function(){$(".panel-progress").remove()}),2e3),$("#btn-download").off("click"),$("#btn-download").on("click",(function(){sweet2.loading(),s(t).then((function(){sweet2.loading(!1)}))}))}))})).catch((function(t){console.error(t),sweet2.show({html:t,icon:"error"})}))}(e,n)}}()};document.addEventListener("DOMContentLoaded",AppExportPDF());