"use strict";var AppAccountAdmin={plugins:{datatable:{list:function(e){return $("#table-request").DataTable({language:helper.datatable.language,searching:!0,ordering:!1,responsive:!0,processing:!0,serverSide:!0,order:[],retrieve:!0,ajax:{url:"/admin/cuentas/pagination",method:"POST",dataType:"json",data:{companyId:AppMain.companyId}},fnDrawCallback:function(t,n){e()},columnDefs:[{targets:0,data:"id",render:function(e,t,n,a){return n.id}},{targets:1,data:"name",render:function(e,t,n,a){return n.name}},{targets:2,data:"typeName",render:function(e,t,n,a){return n.typeName}},{targets:3,data:"typeName",render:function(e,t,n,a){return 1==n.status?"Activado":"Desactivado"}},{targets:4,data:"createdAt",render:function(e,t,n,a){return n.createdAt}},{targets:5,data:"id",className:"text-center",render:function(e,t,n,a){return'\n                                <button type="button" class="btn btn-sm btn-light btn-active-light me-2 dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">\n                                    Acción\n                                </button>\n                                <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-150px py-4 dropdown-menu dropdown-menu-start">\n                                    \x3c!--div class="menu-item px-3">\n                                        <a href="javascript:void(0);" class="menu-link px-3 btn-edit" data-id="'.concat(n.id,'">Editar</a>\n                                    </div--\x3e\n                                    <div class="menu-item px-3">\n                                        <a href="javascript:void(0);" class="menu-link text-danger px-3 btn-remove" data-id="').concat(n.id,'">Eliminar</a>\n                                    </div>\n                                </div>')}}]})}}},index:function(e){var t={},n=AppAccountAdmin.plugins.datatable;return new Vue({el:"#"+e,data:function(){return{user:{},dataTable:{}}},created:function(){t=this},mounted:function(){t.initialize()},watch:{},computed:{},methods:{initialize:function(){t.dataTable=n.list((function(){t.onActionRows()}))},onAuthUrlOnedrive:function(e){e.target.innerText="Procesando",e.target.disabled=!0,$("<form>",{id:"frmAzure",html:' <input type="text" name="userId" value="'.concat(window.AppMain.userId,'"/>\n                                <input type="text" name="companyId" value="').concat(window.AppMain.companyId,'"/>\n                                <input type="text" name="redirect" value="').concat(window.location.protocol+"//"+window.location.host+"/admin/cuentas",'" />'),action:window.AppMain.baseurl+"/microsoft/onedrive/authUrl",method:"post",class:"add-none"}).appendTo(document.body).submit(),$("#frmAzure").remove()},onActionRows:function(){document.querySelector("#"+e).querySelectorAll(".btn-edit");document.querySelector("#"+e).querySelectorAll(".btn-remove").forEach((function(e){e.addEventListener("click",(function(e){sweet2.question({title:"¿Estás seguro de eliminar este elemento?",onOk:function(){var n=e.target.getAttribute("data-id");t.onDelete(n)}})}))}))},onSearchTable:function(e){var n=e.target;t.dataTable.search(n.value).draw()},onCreate:function(e){e.preventDefault(),sweet2.loading();var n=new FormData(e.target);n.append("companyId",AppMain.companyId),n.append("userId",AppMain.userId),window.helper.post("/admin/cuentas/store",n).then((function(n){var a=n.success,r=n.message;if(!a)throw r;sweet2.success({text:r}),bootstrap.Modal.getOrCreateInstance(document.getElementById("modalCreate")).hide(),e.target.reset(),t.dataTable.ajax.reload(null,!1)})).catch((function(e){sweet2.error({text:e})}))},onDelete:function(e){sweet2.loading();var n=new FormData;window.helper.post("/admin/cuentas/"+e+"/remove",n).then((function(e){var n=e.success,a=e.message;if(!n)throw a;sweet2.success({text:a}),t.dataTable.ajax.reload(null,!1)})).catch((function(e){sweet2.error({text:e})}))}}})},init:function(){var e="AppIndexAccountAdmin";document.getElementById(e)&&AppAccountAdmin.index(e)}};document.addEventListener("DOMContentLoaded",AppAccountAdmin.init());