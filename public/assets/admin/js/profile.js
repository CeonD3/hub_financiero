"use strict";var AppProfileAdmin={profile:function(t){var e={};return new Vue({el:"#"+t,data:function(){return{user:{},loadProfile:!1}},created:function(){e=this},mounted:function(){e.initialize()},watch:{},computed:{},methods:{initialize:function(){e.onDetail()},onDetail:function(){window.helper.post("/admin/usuarios/"+AppMain.userId+"/info").then((function(t){if(!t.success)throw t.message;e.user=t.data.user,e.loadProfile=!0})).catch((function(t){sweet2.error({text:t})}))}}})},account:function(t){var e={};return new Vue({el:"#"+t,data:function(){return{loadAccount:!1,account:{},status:!1}},created:function(){e=this},mounted:function(){e.initialize()},watch:{},computed:{},methods:{initialize:function(){console.log("Account"),e.onAccount()},onAccount:function(){window.helper.post("/admin/usuarios/"+AppMain.userId+"/microsoft").then((function(t){if(!t.success)throw t.message;e.account=t.data.account,e.status=t.data.status,e.loadAccount=!0})).catch((function(t){e.loadAccount=!0,sweet2.error({html:t})}))},onToggleAccount:function(t){t.preventDefault();var e=t.target.checked;e?sweet2.question({title:"¿Estás seguro de vincular tu cuenta?",onOk:function(){sweet2.loading(),$("<form>",{id:"frmAzure",html:' <input type="text" name="userId" value="'.concat(window.AppMain.userId,'"/>\n                                            <input type="text" name="redirect" value="').concat(window.location.protocol+"//"+window.location.host+"/admin/perfil",'" />/>'),action:window.AppMain.baseurl+"/microsoft/authurl",method:"post",class:"add-none"}).appendTo(document.body).submit(),$("#frmAzure").remove()},onCancel:function(){t.target.checked=!e}}):sweet2.question({title:"¿Estás seguro de desvincular tu cuenta?",text:"Se descronizará todos los flujos de trabajo que has realizado relacionado con tu cuenta",onOk:function(){sweet2.loading();var n=new FormData;n.append("userId",AppMain.userId),helper.post("/microsoft/signout",n).then((function(t){if(!t.success)throw t.message;sweet2.loading({text:t.message}),setTimeout((function(){window.location.reload()}),2e3)})).catch((function(n){sweet2.error({html:n}),t.target.checked=!e}))},onCancel:function(){t.target.checked=!e}})}}})},init:function(){var t="AppProfileDetailAdmin";document.getElementById(t)&&AppProfileAdmin.profile(t)}};document.addEventListener("DOMContentLoaded",AppProfileAdmin.init());